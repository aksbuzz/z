#!/usr/bin/env python
#####################################
# Installation module for Metasploit
#####################################

# AUTHOR OF MODULE NAME
AUTHOR="Mauro Risonho de Paula Assumpcao (firebits)"

# DESCRIPTION OF THE MODULE
DESCRIPTION="This module will install/update Metasploit An open source attack framework."

# INSTALL TYPE GIT, SVN, FILE DOWNLOAD
# OPTIONS = GIT, SVN, FILE
INSTALL_TYPE="GIT"

# LOCATION OF THE FILE OR GIT/SVN REPOSITORY
REPOSITORY_LOCATION="https://github.com/rapid7/metasploit-framework.git"

# WHERE DO YOU WANT TO INSTALL IT
INSTALL_LOCATION="framework3"

# DEPENDS FOR DEBIAN INSTALLS
DEBIAN="build-essential,libreadline-dev,libssl-dev,libpq5,libpq-dev,libreadline5,libsqlite3-dev,libpcap-dev,openjdk-7-jre,git-core,autoconf,postgresql,pgadmin3,curl,zlib1g-dev,libxml2-dev,libxslt1-dev,libyaml-dev,curl,zlib1g-dev,nmap"

# COMMANDS TO RUN AFTER
# SOUCE LINK:http://www.darkoperator.com/installing-metasploit-in-ubunt/
AFTER_COMMANDS="cd {INSTALL_LOCATION},curl -L https://get.rvm.io | gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 | bash -s stable,source ~/.rvm/scripts/rvm,echo "source ~/.rvm/scripts/rvm" >> ~/.bashrc,source ~/.bashrc,rvm install 2.1.6,rvm use 2.1.6 --default,ruby -v,cd ~,git clone git://github.com/sstephenson/rbenv.git .rbenv,echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc,echo 'eval "$(rbenv init -)"' >> ~/.bashrc,exec $SHELL,git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build,echo 'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"' >> ~/.bashrc,exec $SHELL,rbenv install 2.1.6,rbenv global 2.1.6,ruby -v,sudo -s,su postgres,createuser msf -P -S -R -D,createdb -O msf msf,sudo bash -c 'for MSF in $(ls msf*); do ln -s cd {INSTALL_LOCATION}/$MSF /usr/local/bin/$MSF;done',exit,exit,exit"
